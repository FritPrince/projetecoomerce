import{r as n,j as e,c as d,H as p,y as c,f as x}from"./app-4QF1noMb.js";import{C as f,d as h}from"./card-DR06hP1e.js";import{L as j}from"./loader-circle-Dgj1Lz3L.js";import{C as u}from"./check-gs7IydId.js";/* empty css            */import"./utils-BULDOeo9.js";import"./createLucideIcon-6dVE3Vd0.js";function P({order_id:i,commande_id:o}){const[t,s]=n.useState("processing"),[m,r]=n.useState("Finalisation de votre paiement, veuillez patienter...");return n.useEffect(()=>{(async()=>{try{const a=await(await fetch(`/payment/paypal/capture/${o}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({order_id:i})})).json();a.success?(s("success"),r("Paiement réussi ! Votre commande est confirmée."),c.success("Merci, votre commande a bien été reçue ! Vous recevrez bientôt une confirmation."),setTimeout(()=>{x.visit("/")},2e3)):(s("error"),r(a.message||"Une erreur est survenue lors de la finalisation du paiement."),c.error(a.message||"Une erreur est survenue lors de la finalisation du paiement."))}catch{s("error"),r("Une erreur de communication est survenue. Veuillez contacter le support."),c.error("Une erreur de communication est survenue. Veuillez contacter le support.")}})()},[i,o]),e.jsxs(e.Fragment,{children:[e.jsx(d,{position:"top-right",theme:"colored"}),e.jsx(p,{title:"Statut du Paiement"}),e.jsx("div",{className:"max-w-2xl mx-auto p-6 mt-10",children:e.jsx(f,{children:e.jsxs(h,{className:"text-center py-12",children:[t==="processing"&&e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(j,{className:"h-8 w-8 text-gray-600 animate-spin"})}),t==="success"&&e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(u,{className:"h-8 w-8 text-green-600"})}),t==="error"&&e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(u,{className:"h-8 w-8 text-red-600"})}),e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:[t==="processing"&&"Traitement en cours",t==="success"&&"Paiement réussi !",t==="error"&&"Échec du paiement"]}),e.jsx("p",{className:"text-gray-600",children:m})]})})})]})}export{P as default};
