import{r as l,j as e,H as f,L as g}from"./app-4QF1noMb.js";import{B as b}from"./button-DBIL1Z8B.js";import{C as m,a as x,b as p,d as h}from"./card-DR06hP1e.js";import{A as v}from"./arrow-left-C7Q7q3fr.js";import{C}from"./credit-card-yvDc5vsp.js";import{c as w}from"./createLucideIcon-6dVE3Vd0.js";import{C as P}from"./check-gs7IydId.js";/* empty css            */import"./utils-BULDOeo9.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],M=w("Smartphone",S);function H({commande:t,stripeKey:k}){const[r,u]=l.useState(null),[n,c]=l.useState(!1),[d,a]=l.useState(null),j=[{id:"stripe",name:"Carte bancaire",description:"Visa, Mastercard, American Express",icon:C,color:"bg-blue-50 border-blue-200",iconColor:"text-blue-600"},{id:"paypal",name:"PayPal",description:"Paiement sécurisé via PayPal",icon:M,color:"bg-yellow-50 border-yellow-200",iconColor:"text-yellow-600"}],y=s=>{u(s),a(null)},N=async()=>{if(!r){a("Veuillez sélectionner une méthode de paiement");return}c(!0),a(null);try{if(r==="stripe")window.location.href=`/payment/stripe/${t.id}`;else if(r==="paypal"){const i=await(await fetch(`/payment/paypal/create-order/${t.id}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}})).json();i.success?window.location.href=i.approval_url:a(i.message||"Erreur lors de la création de la commande PayPal")}}catch{a("Une erreur est survenue lors du traitement du paiement")}finally{c(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Méthodes de paiement"}),e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs(g,{href:"/panier",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Retour au panier"]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Méthodes de paiement"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Choisissez votre méthode de paiement pour finaliser votre commande"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(p,{className:"text-lg",children:"Récapitulatif"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Commande"}),e.jsxs("p",{className:"font-medium",children:["#",t.numero_commande]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Produits"}),e.jsx("div",{className:"space-y-2 mt-2",children:t.produits&&t.produits.length>0?t.produits.map(s=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[s.nom," x",s.pivot.quantite]}),e.jsxs("span",{children:[Number(s.pivot.sous_total).toFixed(2)," €"]})]},s.id)):e.jsx("p",{className:"text-sm text-gray-500",children:"Chargement des produits..."})})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Total"}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[Number(t.total).toFixed(2)," €"]})]})})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(p,{className:"text-lg",children:"Choisir une méthode de paiement"})}),e.jsxs(h,{children:[e.jsx("div",{className:"space-y-4",children:j.map(s=>{const i=s.icon,o=r===s.id;return e.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${o?`${s.color} ring-2 ring-blue-500`:"border-gray-200 hover:border-gray-300"}`,onClick:()=>y(s.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.color}`,children:e.jsx(i,{className:`h-6 w-6 ${s.iconColor}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]})]}),o&&e.jsx("div",{className:"flex items-center text-blue-600",children:e.jsx(P,{className:"h-5 w-5"})})]})},s.id)})}),d&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:d})}),e.jsx("div",{className:"mt-6",children:e.jsx(b,{onClick:N,disabled:!r||n,className:"w-full",size:"lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Traitement en cours..."]}):`Payer ${Number(t.total).toFixed(2)} €`})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Votre paiement est sécurisé et crypté"})})]})]})})]})]})]})}export{H as default};
