import{r as t,j as e,H as z,f as m}from"./app-4QF1noMb.js";import{C as M,S as $}from"./ClientLayout-BtUohOIb.js";import{c as B}from"./ProductCard-N2k93zHd.js";import{B as a}from"./button-DBIL1Z8B.js";import{I as h}from"./input-DvwVAa8V.js";import{S as C,a as _,b as w,c as P,d as p}from"./select-lsPa0R9A.js";import{C as H}from"./checkbox-D_A4xq1v.js";import{c as L}from"./createLucideIcon-6dVE3Vd0.js";import{X as O}from"./index-ConwksJU.js";import{F as V}from"./filter-BDhMSa_8.js";/* empty css            */import"./route-DlHd0qRW.js";import"./dialog-CAfAkSWt.js";import"./utils-BULDOeo9.js";import"./arrow-left-C7Q7q3fr.js";import"./heart-DtmTZwjw.js";import"./package-B9d4UWXJ.js";import"./shopping-cart-Bl3zxqU1.js";import"./user-sIJr31Zo.js";import"./index-DoGIkioa.js";import"./index-D9b6Gg7M.js";import"./index-pY3kX1L4.js";import"./index-CHydNK0m.js";import"./index-BBqGkt9K.js";import"./index-B2VJWed_.js";import"./index-Crbwks2i.js";import"./check-gs7IydId.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Z=L("SlidersHorizontal",Q);function ye({produits:d,categories:F,filters:r,stats:j}){const[l,v]=t.useState(r.query),[c,g]=t.useState(r.category),[i,y]=t.useState(r.min_price?.toString()||""),[n,f]=t.useState(r.max_price?.toString()||""),[o,N]=t.useState(r.sort),[x,b]=t.useState(r.in_stock),[S,q]=t.useState(!1),A=s=>{m.post("/panier/ajouter",{produit_id:s,quantite:1},{preserveScroll:!0})},E=s=>{m.post("/favoris/ajouter",{produit_id:s},{preserveScroll:!0})},u=()=>{const s=new URLSearchParams;l&&s.set("q",l),c&&s.set("category",c),i&&s.set("min_price",i),n&&s.set("max_price",n),o!=="relevance"&&s.set("sort",o),x&&s.set("in_stock","1"),m.get(`/rechercher?${s.toString()}`,{},{preserveState:!0,replace:!0})},k=()=>{v(""),g(""),y(""),f(""),N("relevance"),b(!1),m.get("/rechercher",{},{preserveState:!0,replace:!0})},R=t.useMemo(()=>l||c||i||n||o!=="relevance"||x,[l,c,i,n,o,x]),I=[{value:"relevance",label:"Pertinence"},{value:"price_asc",label:"Prix croissant"},{value:"price_desc",label:"Prix d√©croissant"},{value:"name_asc",label:"Nom A-Z"},{value:"name_desc",label:"Nom Z-A"},{value:"newest",label:"Plus r√©cents"}];return e.jsxs(M,{children:[e.jsx(z,{title:`Recherche${r.query?` - ${r.query}`:""}`}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:r.query?`R√©sultats pour "${r.query}"`:"Recherche de produits"}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),e.jsx(h,{placeholder:"Rechercher un produit...",value:l,onChange:s=>v(s.target.value),onKeyPress:s=>s.key==="Enter"&&u(),className:"pl-10"})]}),e.jsx(a,{onClick:u,className:"px-8",children:"Rechercher"}),e.jsxs(a,{variant:"outline",onClick:()=>q(!S),className:"lg:hidden",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Filtres"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[j.total_results," r√©sultat",j.total_results>1?"s":""]}),R&&e.jsxs(a,{variant:"ghost",size:"sm",onClick:k,children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),"Effacer les filtres"]})]})]}),e.jsxs("div",{className:"lg:grid lg:grid-cols-4 lg:gap-8",children:[e.jsx("aside",{className:`lg:col-span-1 ${S?"block":"hidden lg:block"}`,children:e.jsxs("div",{className:"bg-white rounded-lg border p-6 space-y-6",children:[e.jsxs("h3",{className:"font-semibold flex items-center",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Filtres"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cat√©gorie"}),e.jsxs(C,{value:c||"",onValueChange:g,children:[e.jsx(_,{children:e.jsx(w,{placeholder:"Toutes les cat√©gories"})}),e.jsxs(P,{children:[e.jsx(p,{value:"",children:"Toutes les cat√©gories"}),F.map(s=>e.jsx(p,{value:s.id.toString(),children:s.nom},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Prix"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(h,{type:"number",placeholder:"Min",value:i,onChange:s=>y(s.target.value)}),e.jsx(h,{type:"number",placeholder:"Max",value:n,onChange:s=>f(s.target.value)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{id:"in_stock",checked:x,onCheckedChange:s=>b(s)}),e.jsx("label",{htmlFor:"in_stock",className:"text-sm",children:"En stock uniquement"})]}),e.jsx(a,{onClick:u,className:"w-full",children:"Appliquer les filtres"})]})}),e.jsxs("main",{className:"lg:col-span-3",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Trier par:"}),e.jsxs(C,{value:o,onValueChange:N,children:[e.jsx(_,{className:"w-48",children:e.jsx(w,{})}),e.jsx(P,{children:I.map(s=>e.jsx(p,{value:s.value,children:s.label},s.value))})]})]})}),d.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-3",children:d.data.map(s=>e.jsx(B,{produit:s,onAddToCart:A,onAddToFavorites:E},s.id))}),d.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("div",{className:"flex gap-2",children:d.links.map((s,T)=>e.jsx(a,{variant:s.active?"default":"outline",size:"sm",onClick:()=>{s.url&&m.get(s.url,{},{preserveState:!0})},disabled:!s.url,children:s.label},T))})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üîç"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Aucun r√©sultat trouv√©"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Essayez de modifier vos crit√®res de recherche"}),e.jsx(a,{onClick:k,children:"Effacer les filtres"})]})]})]})]})]})}export{ye as default};
