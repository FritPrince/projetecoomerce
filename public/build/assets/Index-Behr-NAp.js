import{r as m,j as e,H as x,L as i,f as c}from"./app-4QF1noMb.js";import{A as h}from"./arrow-left-C7Q7q3fr.js";import{S as p}from"./shopping-cart-Bl3zxqU1.js";import{P as g}from"./package-B9d4UWXJ.js";import{M as j}from"./minus-BFMhAZXE.js";import{P as b}from"./plus-CLjpwHAf.js";import{T as f}from"./trash-2-DPTzMbDY.js";/* empty css            */import"./createLucideIcon-6dVE3Vd0.js";function M({panier:t,flash:a}){const[r,l]=m.useState(null);m.useEffect(()=>{a?.success?l({type:"success",text:a.success}):a?.error&&l({type:"error",text:a.error});const s=setTimeout(()=>l(null),5e3);return()=>clearTimeout(s)},[a]);const n=(s,o)=>{if(o===0){d(s);return}c.put(`/panier/${t?.id}/mettre-a-jour`,{produit_id:s,quantite:o},{preserveScroll:!0,onSuccess:()=>{l({type:"success",text:"Quantité mise à jour"})}})},d=s=>{t&&c.delete(`/panier/${t.id}/produit/${s}`,{preserveScroll:!0,onSuccess:()=>{l({type:"success",text:"Produit retiré du panier"})}})},u=()=>{t&&c.post(`/panier/${t.id}/paiement`)};return!t||t.produits.length===0?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:"Mon Panier - ShopStyle"}),r&&e.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${r.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:r.text}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex items-center mb-8",children:e.jsxs(i,{href:"/",className:"flex items-center text-gray-600 hover:text-primary",children:[e.jsx(h,{className:"h-5 w-5 mr-2"}),"Retour à l'accueil"]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(p,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Votre panier est vide"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Découvrez nos produits et ajoutez-les à votre panier pour commencer vos achats."}),e.jsx(i,{href:"/",className:"bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90 font-semibold",children:"Découvrir les produits"})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{title:"Mon Panier - ShopStyle"}),r&&e.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${r.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:r.text}),e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs(i,{href:"/",className:"flex items-center text-gray-600 hover:text-primary",children:[e.jsx(h,{className:"h-5 w-5 mr-2"}),"Retour à l'accueil"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mon Panier"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:t.produits.map(s=>e.jsx("div",{className:"p-6 border-b border-gray-200 last:border-b-0",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 w-20 h-20 bg-gray-200 rounded-lg overflow-hidden",children:s.image_url?e.jsx("img",{src:s.image_url,alt:s.nom,className:"w-16 h-16 object-cover rounded"}):e.jsx("div",{className:"w-16 h-16 bg-muted flex items-center justify-center rounded",children:e.jsx(g,{className:"h-8 w-8 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:s.nom}),e.jsxs("p",{className:"text-2xl font-bold text-primary mb-2",children:[s.pivot.prix_unitaire," €"]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>n(s.id,s.pivot.quantite-1),disabled:s.pivot.quantite<=1,className:"p-1 rounded-full border border-gray-300 hover:border-primary disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(j,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-semibold",children:s.pivot.quantite}),e.jsx("button",{onClick:()=>n(s.id,s.pivot.quantite+1),disabled:s.pivot.quantite>=s.stock,className:"p-1 rounded-full border border-gray-300 hover:border-primary disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(b,{className:"h-4 w-4"})})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Stock: ",s.stock]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-gray-900 mb-2",children:[s.pivot.sous_total," €"]}),e.jsx("button",{onClick:()=>d(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full transition-colors",children:e.jsx(f,{className:"h-5 w-5"})})]})]})},s.id))})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Résumé"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Sous-total"}),e.jsxs("span",{className:"font-semibold",children:[t.total," €"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Livraison"}),e.jsx("span",{className:"font-semibold",children:"Gratuite"})]}),e.jsx("div",{className:"border-t border-gray-200 pt-3",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-primary",children:[t.total," €"]})]})})]}),e.jsx("button",{onClick:u,className:"w-full bg-primary text-white py-3 px-4 rounded-lg hover:bg-primary/90 font-semibold transition-colors",children:"Procéder au paiement"}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Livraison offerte à partir de 50€ d'achat"})]})})]})]})})]})}export{M as default};
