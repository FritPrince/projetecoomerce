import{r as d,j as e,H as N}from"./app-4QF1noMb.js";import{B as m}from"./button-DBIL1Z8B.js";import{C as x,d as h}from"./card-DR06hP1e.js";import{B as y}from"./badge-BJBZenvE.js";import{C as u}from"./check-gs7IydId.js";import{B as f}from"./bell-DCAOnOCR.js";import{C as b}from"./clock-BivZODi6.js";import{T as v}from"./trash-2-DPTzMbDY.js";import{P as w}from"./package-B9d4UWXJ.js";import{c as k}from"./createLucideIcon-6dVE3Vd0.js";import{S}from"./shopping-cart-Bl3zxqU1.js";/* empty css            */import"./utils-BULDOeo9.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],C=k("TriangleAlert",T),_=r=>{const a=Math.floor((new Date().getTime()-r.getTime())/1e3);return a<60?"il y a quelques secondes":a<3600?`il y a ${Math.floor(a/60)} minute${Math.floor(a/60)>1?"s":""}`:a<86400?`il y a ${Math.floor(a/3600)} heure${Math.floor(a/3600)>1?"s":""}`:a<2592e3?`il y a ${Math.floor(a/86400)} jour${Math.floor(a/86400)>1?"s":""}`:`il y a ${Math.floor(a/2592e3)} mois`},E=r=>{switch(r){case"nouvelle_commande":return e.jsx(S,{className:"h-5 w-5 text-blue-500"});case"stock_faible":return e.jsx(C,{className:"h-5 w-5 text-orange-500"});case"statut_commande_modifie":return e.jsx(w,{className:"h-5 w-5 text-green-500"});default:return e.jsx(f,{className:"h-5 w-5 text-gray-500"})}},$=r=>{switch(r){case"nouvelle_commande":return"bg-blue-50 border-blue-200";case"stock_faible":return"bg-orange-50 border-orange-200";case"statut_commande_modifie":return"bg-green-50 border-green-200";default:return"bg-gray-50 border-gray-200"}};function X({notifications:r,unreadCount:o}){const[a,n]=d.useState(r.data),[c,l]=d.useState(!1),p=async t=>{l(!0);try{await fetch(`/notifications/${t}/mark-as-read`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),n(s=>s.map(i=>i.id===t?{...i,read:!0,read_at:new Date().toISOString()}:i))}catch(s){console.error("Erreur lors du marquage de la notification:",s)}finally{l(!1)}},g=async()=>{l(!0);try{await fetch("/notifications/mark-all-as-read",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),n(t=>t.map(s=>({...s,read:!0,read_at:new Date().toISOString()})))}catch(t){console.error("Erreur lors du marquage de toutes les notifications:",t)}finally{l(!1)}},j=async t=>{l(!0);try{await fetch(`/notifications/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}}),n(s=>s.filter(i=>i.id!==t))}catch(s){console.error("Erreur lors de la suppression de la notification:",s)}finally{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Notifications"}),e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Notifications"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gérez vos notifications et restez informé de l'activité"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[o>0&&e.jsxs(y,{variant:"destructive",className:"text-sm",children:[o," non lue",o>1?"s":""]}),o>0&&e.jsxs(m,{onClick:g,disabled:c,variant:"outline",size:"sm",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Tout marquer comme lu"]})]})]}),a.length===0?e.jsx(x,{children:e.jsxs(h,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(f,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune notification"}),e.jsx("p",{className:"text-gray-500 text-center",children:"Vous n'avez pas encore de notifications. Elles apparaîtront ici quand il y aura de l'activité à signaler."})]})}):e.jsx("div",{className:"space-y-4",children:a.map(t=>e.jsx(x,{className:`transition-all duration-200 hover:shadow-md ${t.read?"":"ring-2 ring-blue-200"} ${$(t.type)}`,children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:E(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:`text-sm font-medium ${t.read?"text-gray-700":"text-gray-900"}`,children:t.title}),!t.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.message}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(b,{className:"h-3 w-3 mr-1"}),_(new Date(t.created_at))]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[!t.read&&e.jsx(m,{onClick:()=>p(t.id),disabled:c,variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",children:e.jsx(u,{className:"h-4 w-4"})}),e.jsx(m,{onClick:()=>j(t.id),disabled:c,variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:e.jsx(v,{className:"h-4 w-4"})})]})]})})},t.id))})]})]})}export{X as default};
