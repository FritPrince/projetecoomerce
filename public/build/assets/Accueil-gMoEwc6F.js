import{r as c,j as e,U as E,H as st,f as fe}from"./app-4QF1noMb.js";import{C as rt}from"./ClientLayout-BtUohOIb.js";import{M as it,i as at,u as Ce,P as ct,a as lt,b as dt,L as ut,m as D,c as mt}from"./ProductCard-N2k93zHd.js";import{f as ft,c as V}from"./utils-BULDOeo9.js";import{X as pt,u as we}from"./index-ConwksJU.js";import{S as Se}from"./shopping-cart-Bl3zxqU1.js";import{H as Q}from"./heart-DtmTZwjw.js";import{C as pe,d as he}from"./card-DR06hP1e.js";import{B as K,u as z}from"./button-DBIL1Z8B.js";import{B as xe}from"./badge-BJBZenvE.js";import{P as ht}from"./package-B9d4UWXJ.js";import{S as ge}from"./star-CIz7PvB5.js";import{T as xt}from"./trending-up-Br8PrwkI.js";import{c as oe,u as G,a as T,P as gt,b as vt}from"./index-pY3kX1L4.js";import{c as Ne,u as Pe}from"./index-CHydNK0m.js";import{P as M}from"./index-DoGIkioa.js";import{C as bt,c as Re}from"./index-D9b6Gg7M.js";import{L as ve}from"./label-GMjfTP0s.js";import{C as be}from"./checkbox-D_A4xq1v.js";import{u as yt}from"./index-Crbwks2i.js";import{u as jt}from"./index-B2VJWed_.js";import{C as Ct}from"./chevron-right-BcqJVpEb.js";/* empty css            */import"./input-DvwVAa8V.js";import"./createLucideIcon-6dVE3Vd0.js";import"./route-DlHd0qRW.js";import"./dialog-CAfAkSWt.js";import"./arrow-left-C7Q7q3fr.js";import"./user-sIJr31Zo.js";import"./check-gs7IydId.js";function ye(t,o){if(typeof t=="function")return t(o);t!=null&&(t.current=o)}function wt(...t){return o=>{let n=!1;const s=t.map(r=>{const i=ye(r,o);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():ye(t[r],null)}}}}function St(...t){return c.useCallback(wt(...t),t)}class Nt extends c.Component{getSnapshotBeforeUpdate(o){const n=this.props.childRef.current;if(n&&o.isPresent&&!this.props.isPresent){const s=n.offsetParent,r=at(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=r-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Pt({children:t,isPresent:o,anchorX:n,root:s}){const r=c.useId(),i=c.useRef(null),a=c.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=c.useContext(it),m=St(i,t?.ref);return c.useInsertionEffect(()=>{const{width:f,height:h,top:l,left:x,right:g}=a.current;if(o||!i.current||!f||!h)return;const C=n==="left"?`left: ${x}`:`right: ${g}`;i.current.dataset.motionPopId=r;const u=document.createElement("style");d&&(u.nonce=d);const v=s??document.head;return v.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${C}px !important;
            top: ${l}px !important;
          }
        `),()=>{v.contains(u)&&v.removeChild(u)}},[o]),e.jsx(Nt,{isPresent:o,childRef:i,sizeRef:a,children:c.cloneElement(t,{ref:m})})}const Rt=({children:t,initial:o,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:a,anchorX:d,root:m})=>{const f=Ce(At),h=c.useId();let l=!0,x=c.useMemo(()=>(l=!1,{id:h,initial:o,isPresent:n,custom:r,onExitComplete:g=>{f.set(g,!0);for(const C of f.values())if(!C)return;s&&s()},register:g=>(f.set(g,!1),()=>f.delete(g))}),[n,f,s]);return i&&l&&(x={...x}),c.useMemo(()=>{f.forEach((g,C)=>f.set(C,!1))},[n]),c.useEffect(()=>{!n&&!f.size&&s&&s()},[n]),a==="popLayout"&&(t=e.jsx(Pt,{isPresent:n,anchorX:d,root:m,children:t})),e.jsx(ct.Provider,{value:x,children:t})};function At(){return new Map}const F=t=>t.key||"";function je(t){const o=[];return c.Children.forEach(t,n=>{c.isValidElement(n)&&o.push(n)}),o}const _t=({children:t,custom:o,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:a=!1,anchorX:d="left",root:m})=>{const[f,h]=lt(a),l=c.useMemo(()=>je(t),[t]),x=a&&!f?[]:l.map(F),g=c.useRef(!0),C=c.useRef(l),u=Ce(()=>new Map),[v,y]=c.useState(l),[b,S]=c.useState(l);dt(()=>{g.current=!1,C.current=l;for(let P=0;P<b.length;P++){const p=F(b[P]);x.includes(p)?u.delete(p):u.get(p)!==!0&&u.set(p,!1)}},[b,x.length,x.join("-")]);const w=[];if(l!==v){let P=[...l];for(let p=0;p<b.length;p++){const j=b[p],R=F(j);x.includes(R)||(P.splice(p,0,j),w.push(j))}return i==="wait"&&w.length&&(P=w),S(je(P)),y(l),null}const{forceRender:_}=c.useContext(ut);return e.jsx(e.Fragment,{children:b.map(P=>{const p=F(P),j=a&&!f?!1:l===b||x.includes(p),R=()=>{if(u.has(p))u.set(p,!0);else return;let I=!0;u.forEach(N=>{N||(I=!1)}),I&&(_?.(),S(C.current),a&&h?.(),s&&s())};return e.jsx(Rt,{isPresent:j,initial:!g.current||n?void 0:!1,custom:o,presenceAffectsLayout:r,mode:i,root:m,onExitComplete:j?void 0:R,anchorX:d,children:P},p)})})},Et=({produit:t,isOpen:o,onClose:n,onAddToCart:s,onAddToFavorites:r})=>t?e.jsx(_t,{children:o&&e.jsx(D.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,children:e.jsxs(D.div,{className:"bg-white rounded-xl shadow-2xl overflow-hidden max-w-4xl w-full max-h-[90vh] flex flex-col md:flex-row",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:i=>i.stopPropagation(),children:[e.jsx("div",{className:"w-full md:w-1/2 bg-gray-100 flex items-center justify-center p-8",children:e.jsx(D.img,{src:t.image_url||"https://via.placeholder.com/400x500?text=Produit",alt:t.nom,className:"max-h-[400px] object-contain",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2}})}),e.jsxs("div",{className:"w-full md:w-1/2 p-6 md:p-8 flex flex-col overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx(D.h2,{className:"text-2xl font-bold",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:t.nom}),e.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(pt,{size:20})})]}),e.jsx(D.div,{className:"text-2xl font-bold text-primary mb-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:ft(t.prix)}),e.jsxs(D.div,{className:"mb-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600",children:t.description})]}),e.jsxs(D.div,{className:"mb-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Disponibilité"}),e.jsx("p",{className:`${t.stock>0?"text-green-600":"text-red-600"}`,children:t.stock>0?`En stock (${t.stock} disponibles)`:"Rupture de stock"})]}),e.jsxs("div",{className:"mt-auto space-y-3",children:[e.jsxs(D.button,{className:"w-full flex items-center justify-center gap-2 bg-primary text-white py-3 px-6 rounded-lg hover:bg-primary/90 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},onClick:()=>s(t.id),disabled:t.stock<=0,children:[e.jsx(Se,{size:18}),"Ajouter au panier"]}),e.jsxs(D.button,{className:"w-full flex items-center justify-center gap-2 border border-gray-300 py-3 px-6 rounded-lg hover:bg-gray-50 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6},onClick:()=>r(t.id),children:[e.jsx(Q,{size:18}),"Ajouter aux favoris"]})]})]})]})})}):null;function It({type:t="popular",title:o,limit:n=8,showTitle:s=!0}){const[r,i]=c.useState([]),[a,d]=c.useState(!0),[m,f]=c.useState(null);c.useEffect(()=>{h()},[t,n]);const h=async()=>{try{d(!0);const u=await fetch(`/api/recommendations?type=${t}&limit=${n}`);if(!u.ok)throw new Error("Erreur lors du chargement des recommandations");const v=await u.json();i(v.recommendations||[])}catch(u){f(u instanceof Error?u.message:"Erreur inconnue")}finally{d(!1)}},l=()=>{if(o)return o;switch(t){case"popular":return"Produits populaires";case"personalized":return"Recommandés pour vous";case"trending":return"Tendances";default:return"Recommandations"}},x=()=>{switch(t){case"popular":return e.jsx(ge,{className:"h-5 w-5"});case"personalized":return e.jsx(Q,{className:"h-5 w-5"});case"trending":return e.jsx(xt,{className:"h-5 w-5"});default:return e.jsx(ge,{className:"h-5 w-5"})}},g=u=>{console.log("Ajouter au panier:",u)},C=u=>{console.log("Ajouter aux favoris:",u)};return a?e.jsxs("div",{className:"space-y-4",children:[s&&e.jsxs("div",{className:"flex items-center gap-2",children:[x(),e.jsx("h2",{className:"text-xl font-semibold",children:l()})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((u,v)=>e.jsx(pe,{className:"animate-pulse",children:e.jsxs(he,{className:"p-4",children:[e.jsx("div",{className:"h-48 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})},v))})]}):m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-500 mb-4",children:m}),e.jsx(K,{onClick:h,variant:"outline",children:"Réessayer"})]}):r.length===0?null:e.jsxs("div",{className:"space-y-4",children:[s&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x(),e.jsx("h2",{className:"text-xl font-semibold",children:l()})]}),e.jsxs(xe,{variant:"secondary",children:[r.length," produit(s)"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map(u=>e.jsx(pe,{className:"group hover:shadow-lg transition-shadow",children:e.jsxs(he,{className:"p-4",children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg mb-4 overflow-hidden",children:u.image_url?e.jsx("img",{src:u.image_url,alt:u.nom,className:"w-full h-48 object-cover rounded-t-lg"}):e.jsx("div",{className:"w-full h-48 bg-muted flex items-center justify-center rounded-t-lg",children:e.jsx(ht,{className:"h-16 w-16 text-muted-foreground"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:u.nom}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-lg font-bold text-primary",children:[Number(u.prix).toFixed(2)," €"]}),e.jsx(xe,{variant:u.stock>0?"default":"destructive",className:"text-xs",children:u.stock>0?"En stock":"Rupture"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(K,{size:"sm",className:"flex-1",onClick:()=>g(u.id),disabled:u.stock===0,children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),"Panier"]}),e.jsx(K,{size:"sm",variant:"outline",onClick:()=>C(u.id),children:e.jsx(Q,{className:"h-4 w-4"})})]})]})]})},u.id))})]})}var Y="Collapsible",[kt,Ae]=oe(Y),[Mt,se]=kt(Y),_e=c.forwardRef((t,o)=>{const{__scopeCollapsible:n,open:s,defaultOpen:r,disabled:i,onOpenChange:a,...d}=t,[m,f]=G({prop:s,defaultProp:r??!1,onChange:a,caller:Y});return e.jsx(Mt,{scope:n,disabled:i,contentId:we(),open:m,onOpenToggle:c.useCallback(()=>f(h=>!h),[f]),children:e.jsx(M.div,{"data-state":ie(m),"data-disabled":i?"":void 0,...d,ref:o})})});_e.displayName=Y;var Ee="CollapsibleTrigger",Ie=c.forwardRef((t,o)=>{const{__scopeCollapsible:n,...s}=t,r=se(Ee,n);return e.jsx(M.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":ie(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:o,onClick:T(t.onClick,r.onOpenToggle)})});Ie.displayName=Ee;var re="CollapsibleContent",ke=c.forwardRef((t,o)=>{const{forceMount:n,...s}=t,r=se(re,t.__scopeCollapsible);return e.jsx(gt,{present:n||r.open,children:({present:i})=>e.jsx(Dt,{...s,ref:o,present:i})})});ke.displayName=re;var Dt=c.forwardRef((t,o)=>{const{__scopeCollapsible:n,present:s,children:r,...i}=t,a=se(re,n),[d,m]=c.useState(s),f=c.useRef(null),h=z(o,f),l=c.useRef(0),x=l.current,g=c.useRef(0),C=g.current,u=a.open||d,v=c.useRef(u),y=c.useRef(void 0);return c.useEffect(()=>{const b=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(b)},[]),vt(()=>{const b=f.current;if(b){y.current=y.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const S=b.getBoundingClientRect();l.current=S.height,g.current=S.width,v.current||(b.style.transitionDuration=y.current.transitionDuration,b.style.animationName=y.current.animationName),m(s)}},[a.open,s]),e.jsx(M.div,{"data-state":ie(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!u,...i,ref:h,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":C?`${C}px`:void 0,...t.style},children:u&&r})});function ie(t){return t?"open":"closed"}var Tt=_e,zt=Ie,$t=ke,k="Accordion",Ot=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ae,Vt,Kt]=Ne(k),[q,eo]=oe(k,[Kt,Ae]),ce=Ae(),Me=E.forwardRef((t,o)=>{const{type:n,...s}=t,r=s,i=s;return e.jsx(ae.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?e.jsx(Ft,{...i,ref:o}):e.jsx(Lt,{...r,ref:o})})});Me.displayName=k;var[De,Bt]=q(k),[Te,Ht]=q(k,{collapsible:!1}),Lt=E.forwardRef((t,o)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},collapsible:i=!1,...a}=t,[d,m]=G({prop:n,defaultProp:s??"",onChange:r,caller:k});return e.jsx(De,{scope:t.__scopeAccordion,value:E.useMemo(()=>d?[d]:[],[d]),onItemOpen:m,onItemClose:E.useCallback(()=>i&&m(""),[i,m]),children:e.jsx(Te,{scope:t.__scopeAccordion,collapsible:i,children:e.jsx(ze,{...a,ref:o})})})}),Ft=E.forwardRef((t,o)=>{const{value:n,defaultValue:s,onValueChange:r=()=>{},...i}=t,[a,d]=G({prop:n,defaultProp:s??[],onChange:r,caller:k}),m=E.useCallback(h=>d((l=[])=>[...l,h]),[d]),f=E.useCallback(h=>d((l=[])=>l.filter(x=>x!==h)),[d]);return e.jsx(De,{scope:t.__scopeAccordion,value:a,onItemOpen:m,onItemClose:f,children:e.jsx(Te,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(ze,{...i,ref:o})})})}),[Ut,W]=q(k),ze=E.forwardRef((t,o)=>{const{__scopeAccordion:n,disabled:s,dir:r,orientation:i="vertical",...a}=t,d=E.useRef(null),m=z(d,o),f=Vt(n),l=Pe(r)==="ltr",x=T(t.onKeyDown,g=>{if(!Ot.includes(g.key))return;const C=g.target,u=f().filter(j=>!j.ref.current?.disabled),v=u.findIndex(j=>j.ref.current===C),y=u.length;if(v===-1)return;g.preventDefault();let b=v;const S=0,w=y-1,_=()=>{b=v+1,b>w&&(b=S)},P=()=>{b=v-1,b<S&&(b=w)};switch(g.key){case"Home":b=S;break;case"End":b=w;break;case"ArrowRight":i==="horizontal"&&(l?_():P());break;case"ArrowDown":i==="vertical"&&_();break;case"ArrowLeft":i==="horizontal"&&(l?P():_());break;case"ArrowUp":i==="vertical"&&P();break}const p=b%y;u[p].ref.current?.focus()});return e.jsx(Ut,{scope:n,disabled:s,direction:r,orientation:i,children:e.jsx(ae.Slot,{scope:n,children:e.jsx(M.div,{...a,"data-orientation":i,ref:m,onKeyDown:s?void 0:x})})})}),U="AccordionItem",[Gt,le]=q(U),$e=E.forwardRef((t,o)=>{const{__scopeAccordion:n,value:s,...r}=t,i=W(U,n),a=Bt(U,n),d=ce(n),m=we(),f=s&&a.value.includes(s)||!1,h=i.disabled||t.disabled;return e.jsx(Gt,{scope:n,open:f,disabled:h,triggerId:m,children:e.jsx(Tt,{"data-orientation":i.orientation,"data-state":Le(f),...d,...r,ref:o,disabled:h,open:f,onOpenChange:l=>{l?a.onItemOpen(s):a.onItemClose(s)}})})});$e.displayName=U;var Oe="AccordionHeader",Ve=E.forwardRef((t,o)=>{const{__scopeAccordion:n,...s}=t,r=W(k,n),i=le(Oe,n);return e.jsx(M.h3,{"data-orientation":r.orientation,"data-state":Le(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:o})});Ve.displayName=Oe;var Z="AccordionTrigger",Ke=E.forwardRef((t,o)=>{const{__scopeAccordion:n,...s}=t,r=W(k,n),i=le(Z,n),a=Ht(Z,n),d=ce(n);return e.jsx(ae.ItemSlot,{scope:n,children:e.jsx(zt,{"aria-disabled":i.open&&!a.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...d,...s,ref:o})})});Ke.displayName=Z;var Be="AccordionContent",He=E.forwardRef((t,o)=>{const{__scopeAccordion:n,...s}=t,r=W(k,n),i=le(Be,n),a=ce(n);return e.jsx($t,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...a,...s,ref:o,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});He.displayName=Be;function Le(t){return t?"open":"closed"}var Yt=Me,qt=$e,Wt=Ve,Xt=Ke,Jt=He;function Qt({...t}){return e.jsx(Yt,{"data-slot":"accordion",...t})}function Zt({className:t,...o}){return e.jsx(qt,{"data-slot":"accordion-item",className:V("border-b last:border-b-0",t),...o})}function en({className:t,children:o,...n}){return e.jsx(Wt,{className:"flex",children:e.jsxs(Xt,{"data-slot":"accordion-trigger",className:V("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...n,children:[o,e.jsx(bt,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function tn({className:t,children:o,...n}){return e.jsx(Jt,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:e.jsx("div",{className:V("pt-0 pb-4",t),children:o})})}var Fe=["PageUp","PageDown"],Ue=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ge={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},B="Slider",[ee,nn,on]=Ne(B),[Ye,to]=oe(B,[on]),[sn,X]=Ye(B),qe=c.forwardRef((t,o)=>{const{name:n,min:s=0,max:r=100,step:i=1,orientation:a="horizontal",disabled:d=!1,minStepsBetweenThumbs:m=0,defaultValue:f=[s],value:h,onValueChange:l=()=>{},onValueCommit:x=()=>{},inverted:g=!1,form:C,...u}=t,v=c.useRef(new Set),y=c.useRef(0),S=a==="horizontal"?rn:an,[w=[],_]=G({prop:h,defaultProp:f,onChange:N=>{[...v.current][y.current]?.focus(),l(N)}}),P=c.useRef(w);function p(N){const A=mn(w,N);I(N,A)}function j(N){I(N,y.current)}function R(){const N=P.current[y.current];w[y.current]!==N&&x(w)}function I(N,A,{commit:H}={commit:!1}){const ue=xn(i),J=gn(Math.round((N-s)/i)*i+s,ue),L=Re(J,[s,r]);_((O=[])=>{const $=dn(O,L,A);if(hn($,m*i)){y.current=$.indexOf(L);const me=String($)!==String(O);return me&&H&&x($),me?$:O}else return O})}return e.jsx(sn,{scope:t.__scopeSlider,name:n,disabled:d,min:s,max:r,valueIndexToChangeRef:y,thumbs:v.current,values:w,orientation:a,form:C,children:e.jsx(ee.Provider,{scope:t.__scopeSlider,children:e.jsx(ee.Slot,{scope:t.__scopeSlider,children:e.jsx(S,{"aria-disabled":d,"data-disabled":d?"":void 0,...u,ref:o,onPointerDown:T(u.onPointerDown,()=>{d||(P.current=w)}),min:s,max:r,inverted:g,onSlideStart:d?void 0:p,onSlideMove:d?void 0:j,onSlideEnd:d?void 0:R,onHomeKeyDown:()=>!d&&I(s,0,{commit:!0}),onEndKeyDown:()=>!d&&I(r,w.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:A})=>{if(!d){const J=Fe.includes(N.key)||N.shiftKey&&Ue.includes(N.key)?10:1,L=y.current,O=w[L],$=i*J*A;I(O+$,L,{commit:!0})}}})})})})});qe.displayName=B;var[We,Xe]=Ye(B,{startEdge:"left",endEdge:"right",size:"width",direction:1}),rn=c.forwardRef((t,o)=>{const{min:n,max:s,dir:r,inverted:i,onSlideStart:a,onSlideMove:d,onSlideEnd:m,onStepKeyDown:f,...h}=t,[l,x]=c.useState(null),g=z(o,S=>x(S)),C=c.useRef(void 0),u=Pe(r),v=u==="ltr",y=v&&!i||!v&&i;function b(S){const w=C.current||l.getBoundingClientRect(),_=[0,w.width],p=de(_,y?[n,s]:[s,n]);return C.current=w,p(S-w.left)}return e.jsx(We,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:e.jsx(Je,{dir:u,"data-orientation":"horizontal",...h,ref:g,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const w=b(S.clientX);a?.(w)},onSlideMove:S=>{const w=b(S.clientX);d?.(w)},onSlideEnd:()=>{C.current=void 0,m?.()},onStepKeyDown:S=>{const _=Ge[y?"from-left":"from-right"].includes(S.key);f?.({event:S,direction:_?-1:1})}})})}),an=c.forwardRef((t,o)=>{const{min:n,max:s,inverted:r,onSlideStart:i,onSlideMove:a,onSlideEnd:d,onStepKeyDown:m,...f}=t,h=c.useRef(null),l=z(o,h),x=c.useRef(void 0),g=!r;function C(u){const v=x.current||h.current.getBoundingClientRect(),y=[0,v.height],S=de(y,g?[s,n]:[n,s]);return x.current=v,S(u-v.top)}return e.jsx(We,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:e.jsx(Je,{"data-orientation":"vertical",...f,ref:l,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:u=>{const v=C(u.clientY);i?.(v)},onSlideMove:u=>{const v=C(u.clientY);a?.(v)},onSlideEnd:()=>{x.current=void 0,d?.()},onStepKeyDown:u=>{const y=Ge[g?"from-bottom":"from-top"].includes(u.key);m?.({event:u,direction:y?-1:1})}})})}),Je=c.forwardRef((t,o)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:r,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:d,onStepKeyDown:m,...f}=t,h=X(B,n);return e.jsx(M.span,{...f,ref:o,onKeyDown:T(t.onKeyDown,l=>{l.key==="Home"?(a(l),l.preventDefault()):l.key==="End"?(d(l),l.preventDefault()):Fe.concat(Ue).includes(l.key)&&(m(l),l.preventDefault())}),onPointerDown:T(t.onPointerDown,l=>{const x=l.target;x.setPointerCapture(l.pointerId),l.preventDefault(),h.thumbs.has(x)?x.focus():s(l)}),onPointerMove:T(t.onPointerMove,l=>{l.target.hasPointerCapture(l.pointerId)&&r(l)}),onPointerUp:T(t.onPointerUp,l=>{const x=l.target;x.hasPointerCapture(l.pointerId)&&(x.releasePointerCapture(l.pointerId),i(l))})})}),Qe="SliderTrack",Ze=c.forwardRef((t,o)=>{const{__scopeSlider:n,...s}=t,r=X(Qe,n);return e.jsx(M.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...s,ref:o})});Ze.displayName=Qe;var te="SliderRange",et=c.forwardRef((t,o)=>{const{__scopeSlider:n,...s}=t,r=X(te,n),i=Xe(te,n),a=c.useRef(null),d=z(o,a),m=r.values.length,f=r.values.map(x=>ot(x,r.min,r.max)),h=m>1?Math.min(...f):0,l=100-Math.max(...f);return e.jsx(M.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:d,style:{...t.style,[i.startEdge]:h+"%",[i.endEdge]:l+"%"}})});et.displayName=te;var ne="SliderThumb",tt=c.forwardRef((t,o)=>{const n=nn(t.__scopeSlider),[s,r]=c.useState(null),i=z(o,d=>r(d)),a=c.useMemo(()=>s?n().findIndex(d=>d.ref.current===s):-1,[n,s]);return e.jsx(cn,{...t,ref:i,index:a})}),cn=c.forwardRef((t,o)=>{const{__scopeSlider:n,index:s,name:r,...i}=t,a=X(ne,n),d=Xe(ne,n),[m,f]=c.useState(null),h=z(o,b=>f(b)),l=m?a.form||!!m.closest("form"):!0,x=jt(m),g=a.values[s],C=g===void 0?0:ot(g,a.min,a.max),u=un(s,a.values.length),v=x?.[d.size],y=v?fn(v,C,d.direction):0;return c.useEffect(()=>{if(m)return a.thumbs.add(m),()=>{a.thumbs.delete(m)}},[m,a.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${C}% + ${y}px)`},children:[e.jsx(ee.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(M.span,{role:"slider","aria-label":t["aria-label"]||u,"aria-valuemin":a.min,"aria-valuenow":g,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:h,style:g===void 0?{display:"none"}:t.style,onFocus:T(t.onFocus,()=>{a.valueIndexToChangeRef.current=s})})}),l&&e.jsx(nt,{name:r??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:g},s)]})});tt.displayName=ne;var ln="RadioBubbleInput",nt=c.forwardRef(({__scopeSlider:t,value:o,...n},s)=>{const r=c.useRef(null),i=z(r,s),a=yt(o);return c.useEffect(()=>{const d=r.current;if(!d)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"value").set;if(a!==o&&h){const l=new Event("input",{bubbles:!0});h.call(d,o),d.dispatchEvent(l)}},[a,o]),e.jsx(M.input,{style:{display:"none"},...n,ref:i,defaultValue:o})});nt.displayName=ln;function dn(t=[],o,n){const s=[...t];return s[n]=o,s.sort((r,i)=>r-i)}function ot(t,o,n){const i=100/(n-o)*(t-o);return Re(i,[0,100])}function un(t,o){return o>2?`Value ${t+1} of ${o}`:o===2?["Minimum","Maximum"][t]:void 0}function mn(t,o){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-o)),s=Math.min(...n);return n.indexOf(s)}function fn(t,o,n){const s=t/2,i=de([0,50],[0,s]);return(s-i(o)*n)*n}function pn(t){return t.slice(0,-1).map((o,n)=>t[n+1]-o)}function hn(t,o){if(o>0){const n=pn(t);return Math.min(...n)>=o}return!0}function de(t,o){return n=>{if(t[0]===t[1]||o[0]===o[1])return o[0];const s=(o[1]-o[0])/(t[1]-t[0]);return o[0]+s*(n-t[0])}}function xn(t){return(String(t).split(".")[1]||"").length}function gn(t,o){const n=Math.pow(10,o);return Math.round(t*n)/n}var vn=qe,bn=Ze,yn=et,jn=tt;function Cn({className:t,defaultValue:o,value:n,min:s=0,max:r=100,...i}){const a=c.useMemo(()=>Array.isArray(n)?n:Array.isArray(o)?o:[s,r],[n,o,s,r]);return e.jsxs(vn,{"data-slot":"slider",defaultValue:o,value:n,min:s,max:r,className:V("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...i,children:[e.jsx(bn,{"data-slot":"slider-track",className:V("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(yn,{"data-slot":"slider-range",className:V("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(d,m)=>e.jsx(jn,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},m))]})}function wn({categories:t,onFilterChange:o}){const[n,s]=c.useState([]),[r,i]=c.useState([0,1e3]),a=c.useRef(null);c.useEffect(()=>(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{o({categoryIds:n,minPrice:r[0],maxPrice:r[1]})},300),()=>{a.current&&clearTimeout(a.current)}),[n,r,o]);const d=(m,f)=>{s(h=>f?[...h,m]:h.filter(l=>l!==m))};return e.jsxs("div",{className:"w-full space-y-6 p-4 lg:p-0",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Filtres"}),e.jsx(Qt,{type:"multiple",className:"w-full",children:e.jsxs(Zt,{value:"categories",children:[e.jsx(en,{className:"text-base font-semibold",children:"Catégories"}),e.jsx(tn,{children:e.jsx("div",{className:"space-y-2",children:t.map(m=>e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{id:`cat-${m.id}`,checked:n.includes(m.id),onCheckedChange:f=>d(m.id,f)}),e.jsx(ve,{htmlFor:`cat-${m.id}`,children:m.nom})]}),m.sous_categories&&m.sous_categories.length>0&&e.jsx("div",{className:"ml-4 space-y-1",children:m.sous_categories.map(f=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{id:`sous-cat-${f.id}`,checked:n.includes(f.id),onCheckedChange:h=>d(f.id,h)}),e.jsx(ve,{htmlFor:`sous-cat-${f.id}`,className:"text-sm text-muted-foreground",children:f.nom})]},f.id))})]},m.id))})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-base font-semibold",children:"Prix"}),e.jsx(Cn,{min:0,max:1e3,step:10,value:r,onValueChange:m=>i(m),className:"w-[90%]"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[r[0]," €"]}),e.jsxs("span",{children:[r[1]," €"]})]})]})]})}function no({categories:t=[],produits:o=[]}){const[n,s]=c.useState([]),[r,i]=c.useState(0),[a,d]=c.useState(1e3),[m,f]=c.useState(null),[h,l]=c.useState(!1),[x,g]=c.useState([]),C=p=>{fe.post("/panier/ajouter",{produit_id:p,quantite:1},{preserveScroll:!0})},u=p=>{fe.post("/favoris/ajouter",{produit_id:p},{preserveScroll:!0})},v=p=>{s(p.categoryIds||[]),i(p.minPrice),d(p.maxPrice)},y=p=>{f(p),l(!0)},b=()=>{l(!1)},S=p=>{g(j=>j.includes(p)?j.filter(R=>R!==p):[...j,p])},w=c.useMemo(()=>o.filter(p=>{if(!n||n.length===0)return p.prix>=r&&p.prix<=a;const j=t.some(A=>n.includes(A.id)&&A.sous_categories.some(H=>H.id===p.sous_categorie_id)),R=t.flatMap(A=>A.sous_categories).some(A=>n.includes(A.id)&&A.id===p.sous_categorie_id),I=j||R,N=p.prix>=r&&p.prix<=a;return I&&N}),[o,n,r,a,t]),_=c.useMemo(()=>{const p={};return w.forEach(j=>{p[j.sous_categorie_id]||(p[j.sous_categorie_id]=[]),p[j.sous_categorie_id].push(j)}),p},[w]),P=p=>{for(const j of t)for(const R of j.sous_categories)if(R.id===p)return R.nom;return"Sous-catégorie"};return e.jsxs(rt,{children:[e.jsx(st,{title:"Boutique en ligne - Découvrez nos produits"}),e.jsxs("section",{className:"relative h-[60vh] min-h-[400px] w-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=2070&auto=format&fit=crop')"},children:[e.jsx("div",{className:"absolute inset-0 bg-black/50"}),e.jsxs("div",{className:"relative z-10 flex h-full flex-col items-center justify-center text-center text-white",children:[e.jsx("h1",{className:"text-4xl font-extrabold tracking-tight md:text-6xl",children:"Collection Été 2024"}),e.jsx("p",{className:"mt-4 max-w-2xl text-lg md:text-xl",children:"Découvrez les dernières tendances et trouvez votre style parfait."}),e.jsx(K,{size:"lg",className:"mt-8",children:"Explorer la collection"})]})]}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12 lg:py-16",children:e.jsxs("div",{className:"lg:grid lg:grid-cols-4 lg:gap-8",children:[e.jsx("aside",{className:"lg:col-span-1",children:e.jsx(wn,{categories:t,onFilterChange:v})}),e.jsxs("section",{className:"lg:col-span-3 mt-8 lg:mt-0",children:[e.jsx("h2",{className:"mb-6 text-2xl font-bold tracking-tight",children:"Nos Produits"}),Object.keys(_).length>0?e.jsx("div",{className:"space-y-12",children:Object.entries(_).map(([p,j])=>{const R=x.includes(Number(p)),I=R?j:j.slice(0,5);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold",children:P(Number(p))}),j.length>5&&e.jsxs(K,{variant:"ghost",onClick:()=>S(Number(p)),className:"flex items-center gap-1 text-primary hover:text-primary/80",children:[R?"Voir moins":"Voir plus",e.jsx(Ct,{className:`h-4 w-4 transition-transform ${R?"rotate-90":""}`})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 xl:grid-cols-3",children:I.map(N=>e.jsx(mt,{produit:N,onAddToCart:C,onAddToFavorites:u,onViewDetails:y},N.id))}),j.length>5&&!R&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(K,{variant:"outline",onClick:()=>S(Number(p)),className:"mt-2",children:["Voir tous les produits (",j.length,")"]})})]},p)})}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"Aucun produit ne correspond à vos critères de recherche."})})]})]})}),e.jsx("div",{className:"bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx(It,{type:"popular",limit:8})})}),e.jsx(Et,{produit:m,isOpen:h,onClose:b,onAddToCart:C,onAddToFavorites:u})]})}export{no as default};
